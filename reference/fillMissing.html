<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Fill Missing Values — fillMissing • baytrends</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Fill Missing Values — fillMissing"><meta property="og:description" content="Replace missing values in time-series data by interpolation."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">baytrends</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.0.7</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/Detrending_Flow_and_Salinity_Data.html">Flow and Salinity Data Sets</a>
    </li>
    <li>
      <a href="../articles/Processing_Censored_Data.html">Processing Censored Water Quality Data</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/tetratech/baytrends/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Fill Missing Values</h1>
    <small class="dont-index">Source: <a href="https://github.com/tetratech/baytrends/blob/HEAD/R/smwrBase_fillMissing.R" class="external-link"><code>R/smwrBase_fillMissing.R</code></a></small>
    <div class="hidden name"><code>fillMissing.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Replace missing values in time-series data by interpolation.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">fillMissing</span><span class="op">(</span><span class="va">x</span>, span <span class="op">=</span> <span class="fl">10</span>, Dates <span class="op">=</span> <span class="cn">NULL</span>, max.fill <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x</dt>
<dd><p>the sequence of observations. Missing values are permitted and will
be replaced.</p></dd>
<dt>span</dt>
<dd><p>the maximum number of observations on each side of each range of
missing values to use in constructing the time-series model. See
<b>Details</b>.</p></dd>
<dt>Dates</dt>
<dd><p>an optional vector of dates/times associated with each value 
in <code>x</code>. Useful if there are gaps in dates/times.</p></dd>
<dt>max.fill</dt>
<dd><p>the maximum gap to fill.</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>The observations in <code>x</code> with missing values replaced by
interpolation.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>Missing values at the beginning and end of <code>x</code> will not be replaced. <br></p>
<p>The argument <code>span</code> is used to help set the range of values used to
construct the <code>StructTS</code> model. If <code>span</code> is set small, then the
variance of epsilon dominates and the estimates are not smooth. If
<code>span</code> is large, then the variance of level dominates and the estimates
are linear interpolations. The variances of level and epsilon are components
of the state-space model used to interpolate values, see <code><a href="https://rdrr.io/r/stats/StructTS.html" class="external-link">StructTS</a></code> for details. 
See <b>Note</b> for more information about the method.<br></p>
<p>If <code>span</code> is set larger than 99, then the entire time series is used to
estimate all missing values.  This approach may be useful if there are many
periods of missing values. If <code>span</code> is set to any number less than 4,
then simple linear interpolation will be used to replace missing values.</p>
<p>Added from smwrBase.</p>
    </div>
    <div id="note">
    <h2>Note</h2>
    <p>The method used to interpolate missing values is based on
<code>tsSmooth</code> constructed using <code>StructTS</code> on <code>x</code> with
<code>type</code> set to "trend." The smoothing method basically uses the
information (slope) from two values previous to missing values and the two
values following missing values to smoothly interpolate values accounting for
any change in slope. Beauchamp (1989) used time-series methods for synthesizing
missing streamflow records. The group that is used to define the statistics that
control the interpolation is very simply defined by <code>span</code> rather than
the more in-depth measures described in Elshorbagy and others (2000).</p>
<p>If the data have gaps rather than missing values, then fillMissing will return
a vector longer than <code>x</code> if <code>Dates</code> is given and the return data
cannot be inserted into the original data frame. If <code>Dates</code> is not given,
then the gap will be recognized and not be filled. The function
<code>insertMissing</code> can be used to create a data frame with the complete
sequence of dates.</p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p>Beauchamp, J.J., 1989, Comparison of regression and time-series
methods for synthesizing missing streamflow records: Water Resources
Bulletin, v. 25, no. 5, p. 961--975.<br></p>
<p>Elshorbagy, A.A., Panu, U.S., and Simonovic, S.P., 2000, Group-based estimation
of missing hydrological data, I. Approach and general methodology:
Hydrological Sciences Journal, v. 45, no. 6, p. 849--866.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="https://rdrr.io/r/stats/tsSmooth.html" class="external-link">tsSmooth</a></code>, <code><a href="https://rdrr.io/r/stats/StructTS.html" class="external-link">StructTS</a></code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in"><span class="co">#library(smwrData)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">Q05078470</span><span class="op">)</span></span>
<span class="r-in"><span class="co"># Create missing values in flow, the first sequence is a peak and the second is a recession</span></span>
<span class="r-in"><span class="va">Q05078470</span><span class="op">$</span><span class="va">FlowMiss</span> <span class="op">&lt;-</span> <span class="va">Q05078470</span><span class="op">$</span><span class="va">FLOW</span></span>
<span class="r-in"><span class="va">Q05078470</span><span class="op">$</span><span class="va">FlowMiss</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">109</span><span class="op">:</span><span class="fl">111</span>, <span class="fl">198</span><span class="op">:</span><span class="fl">201</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span>
<span class="r-in"><span class="co"># Interpolate the missing values</span></span>
<span class="r-in"><span class="va">Q05078470</span><span class="op">$</span><span class="va">FlowFill</span> <span class="op">&lt;-</span> <span class="fu">fillMissing</span><span class="op">(</span><span class="va">Q05078470</span><span class="op">$</span><span class="va">FlowMiss</span><span class="op">)</span></span>
<span class="r-in"><span class="co"># How did we do (line is actual, points are filled values)?</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">1</span><span class="op">)</span>, mar<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5.1</span>, <span class="fl">4.1</span>, <span class="fl">1.1</span>, <span class="fl">1.1</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></span><span class="op">(</span><span class="va">Q05078470</span><span class="op">[</span><span class="fl">100</span><span class="op">:</span><span class="fl">120</span>, <span class="op">]</span>, <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">DATES</span>, <span class="va">FLOW</span>, type<span class="op">=</span><span class="st">"l"</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></span><span class="op">(</span><span class="va">Q05078470</span><span class="op">[</span><span class="fl">109</span><span class="op">:</span><span class="fl">111</span>, <span class="op">]</span>, <span class="fu"><a href="https://rdrr.io/r/graphics/points.html" class="external-link">points</a></span><span class="op">(</span><span class="va">DATES</span>, <span class="va">FlowFill</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></span><span class="op">(</span><span class="va">Q05078470</span><span class="op">[</span><span class="fl">190</span><span class="op">:</span><span class="fl">210</span>, <span class="op">]</span>, <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">DATES</span>, <span class="va">FLOW</span>, type<span class="op">=</span><span class="st">"l"</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></span><span class="op">(</span><span class="va">Q05078470</span><span class="op">[</span><span class="fl">198</span><span class="op">:</span><span class="fl">201</span>, <span class="op">]</span>, <span class="fu"><a href="https://rdrr.io/r/graphics/points.html" class="external-link">points</a></span><span class="op">(</span><span class="va">DATES</span>, <span class="va">FlowFill</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"><span class="op">}</span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Erik W Leppo.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

      </footer></div>

  


  

  </body></html>

