<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Analysis Organization &amp; Data Preparation — analysisOrganizeData • baytrends</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Analysis Organization &amp; Data Preparation — analysisOrganizeData"><meta property="og:description" content="This function assesses the user supplied specifications in the argument,
analySpec, and prepares the data (argument df) for analysis. In those cases
where the user doesn't supply a needed specification, a basic option is
supplied by this function."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">baytrends</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.0.10</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/Detrending_Flow_and_Salinity_Data.html">Flow and Salinity Data Sets</a>
    </li>
    <li>
      <a href="../articles/Processing_Censored_Data.html">Processing Censored Water Quality Data</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/tetratech/baytrends/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Analysis Organization &amp; Data Preparation</h1>
    <small class="dont-index">Source: <a href="https://github.com/tetratech/baytrends/blob/HEAD/R/analysisOrganizeData.R" class="external-link"><code>R/analysisOrganizeData.R</code></a></small>
    <div class="hidden name"><code>analysisOrganizeData.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function assesses the user supplied specifications in the argument,
analySpec, and prepares the data (argument df) for analysis. In those cases
where the user doesn't supply a needed specification, a basic option is
supplied by this function.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">analysisOrganizeData</span><span class="op">(</span></span>
<span>  <span class="va">df</span>,</span>
<span>  analySpec <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  reports <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">4</span><span class="op">)</span>,</span>
<span>  parameterList <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  stationMasterList <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  layerLukup <span class="op">=</span> <span class="cn">NA</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>df</dt>
<dd><p>Data frame of water quality data</p></dd>


<dt>analySpec</dt>
<dd><p>Specifications for analysis</p></dd>


<dt>reports</dt>
<dd><p>Optional reports about parameters, layers and stations
[default = c(0,1,2,3)]</p></dd>


<dt>parameterList</dt>
<dd><p>User-supplied dataframe with list of parameters [default
= NA]</p></dd>


<dt>stationMasterList</dt>
<dd><p>User-supplied dataframe with list of stations
[default = NA]</p></dd>


<dt>layerLukup</dt>
<dd><p>User-supplied dataframe with list of layers [default = NA]</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>Returns a list. Use dfr[["df"]] and dfr[["analySpec"]] to extract
  updated data frame and updated (or created) analySpec. analySpec is a list
  that includes the following components:</p>


<p>analyTitle       - Analysis trend title</p>


<p>parameterFilt    - Parameter filter used for data down selection</p>


<p>stationFilt      - Station filter used for data down selection</p>


<p>dateFilt         - Date filter for data down selection (default =  c( as.POSIXct('1984-01-01')
                           , as.POSIXct(Sys.time())))</p>


<p>setTZ            - time zone (default = "America/New_York")</p>


<p>layerFilt        - Layer filter</p>


<p>layerAggOption   - Layer averaging option (default = 0). Other options are:
  1: combine "S" &amp; "AP" ("SAP"); 2: combine "B" &amp; "BP" ("BBP"); 3: opt 1 &amp; 2
  ("SAP", "BBP"); 4: combine all ("ALL")); 5: combine "S" and "B" ("SB")</p>


<p>obsMin           - Minimum number of observations required to allow GAM
  analysis to proceed for a specific station, parameter, and layer
  combination (default = 60).</p>
  

<p>obsMinInter      - Minimum number of observations required to allow GAM
  analysis to proceed for a specific intervention (default = 10).</p>


<p>gamAlpha         - Alpha level used GAM analyses (default = 0.05).</p>


<p>censorTrim       - Values to apply for trimming data due to too much
  censoring (default = c(0.5, 0.4)). First argument indicates fraction of
  observations in a year that are allowed to be censored. Second argument is
  the fraction of years, starting from the beginning of the record, that are
  allowed to be "flagged" for too much censoring. A minimum of two years must
  have too much censoring before data are removed. The default settings can
  be read as no more than 40 percent of the beginning years of data are
  allowed to have more than 50 percent censoring before the beginning portion
  of the record is trimmed. For example, years 1 and 3 of data have more than
  50 percent censoring then the first three years of data are trimmed.
  Similarly, for years 1 and 4, then the first four years are removed. If
  years 1 and 5 have more than 50 percent censoring the data are kept since
  2/5 is not greater than 0.4. Changing this setting to, say, c(0.2,0.4) would require
  that 80<!-- % of the data in a year to be un-censored. --></p>



<p>gamModels        - model formulations. See baytrends::loadModels() for 
  simplified approach for selecting which built-in models to include</p>
  

<p>showGamNumOnPlot	- Show gam option (i.e., 0-6) on gam plots (TRUE/FALSE)</p>


<p>gamDiffPeriods   - list of time periods (years) used for computing changes
  (differences). The default options are: full record, 1999/00-present, and
  2005/06-present.</p>


<p>gamDiffSeasons   - list List of seasons used for sub-annual analyses of
  computing differences. The default options include the following: All
  (months 1:12), Spring1 (3:5), Spring2 (months: 4:6)), Summer1 (months:
  6:9)), Summer2 (months: 7:9)), SAV1 (months: 4:10)), SAV2 (months:
  3:5,9:11)), Winter (months: 1:2)), and Fall (months: 10:12))).</p>
  

<p>gamDiffNumChgYrs - number of years to use in computing differences.</p>


<p>gamPenalty       - allow the user to set the mgcv::gam select argument to
  TRUE, FALSE, or baytrend algorithm default (default = NA). When the default
  option is specified, then the mgcv::gam select argument is set to FALSE
  when none of the data are censored; otherwise (when some censoring exists
  in the data set) the select argument is set to TRUE</p>


<p>gamPenaltyCrit   - edf and F-stat values used to flag ANOVA table results
  (default = c(1, 9e9))</p>


<p>gamCoeffDeltaMaxCrit - convergence criteria for expectation maximization
  (default = 1e-6)</p>


<p>gamFlw_Sal.Wgt.Perc - percentiles of flow [or salinity] to use for
  computing flow [salinity] averaged result (default = c(0.05, 0.25, 0.50,
  0.75, 0.95))</p>


<p>gamLegend        - default settings for gam figure legend</p>


<p>idVar            - primary key for data frame returned as df</p>


<p>depVarList       - data frame of dependent variables (useful for setting up gam analyses in for loops)</p>


<p>stationList      - data frame of stations (useful for setting up gam analyses in for loops)</p>


<p>layerList        - data frame of layers (useful for setting up gam analyses in for loops)</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>The supplied data frame, df, is a data frame with the variables station,
 date, and layer included along with multiple additional columns for a
 variety of water quality variables structured as numeric fields or 
 survival::Surv objects. An example data frame, dataCensored, is included
 with baytrends as an example.</p> 
<p>The argument, analySpec, is a list that includes basic specifications for
 performing GAM analyses. The components in analySpec are identified below.
 The user may create analySpec (which can include all or some of the below
 components; and pass the user-supplied analySpec to this function. Or, the
 user may accept the default argument and allow analysisOrganizeData to
 create and return analySpec. If the user passes a user-supplied analySpec,
 then analysisOrganizeData will "fill in" required arguments not provided by
 the user. The user can also adjust analySpec after it is returned from
 analysisOrganizeData although requirements for down selecting the data frame,
 df, or aggregating data by layer would need to be passed to analysisOrganizeData.</p> 
<p>The default setting for the argument report is to provide tabular summary
 reports about the parameters, stations, and layers to be analyzed. Setting
 report=NA will suppress the tabular summary reports.</p> 
<p>The user can supply their own parameterList, stationMasterList, or
 layerLukup data sets; or the user can use the example data frames included
 with baytrends.</p>
<p>The following steps are performed by analysisOrganizeData:</p>
<p>1) Review user supplied specifications through the analySpec argument. Fill
 in with default values. For example, if the user doesn't specify a dataframe
 with a list of stations, parameters, or layers, then the built-in data
 frames, baytrends::stationMasterList, baytrends::parameterList, and
 baytrends::layerLukup are used. Some other default values include the
 following: date range (1/1/1984-present), parameter list (all parameters in
 data set parameterList), layers (all layers in data set layerLukup), layer
 aggregation option (0, no aggregation), minimum number of observations to
 perform a GAM analysis (60), GAM formulas (Linear Trend with Seasonality,
 Non-linear Trend with Seasonality, and Non-linear trend with Seasonality
 (plus Interactions)), GAM alpha level for plots and output (0.05), periods
 for multi-time period analyses using GAM (Full Record, 1999/00-Present, and
 2005/06-Present), and seasons for sub-annual analyses using GAM (All,
 Spring1, Spring2, Summer1, Summer2, SAV1, SAV2, Winter, and Fall.)</p>
<p>2) Based on the settings in analySpec, the data frame df, is down selected
 based on parameters, stations, dates, and layers. A dependent variable list
 (depVarList) is created that includes variable descriptions, units, and log
 transformation selections. A station list (stationList) is created that
 includes the station ID, a selected USGS gage for correlating flow, and
 latitude/longitude.</p>
<p>3) Aggregate data layers. If analySpec$layerAggOption is equal to 0, then
 there is no aggregation. The analySpec$layerAggOption of 1 would result in
 averaging (mean) surface and above pycnocline data. In this example, records
 with layer = "S" and layer = "AP" are relabeled as "SAP". Other
 layerAggOption values are 2) "B"&amp;"BP"; 3) "S"&amp;"AP" and "B"&amp;"BP"; 4) all
 layers; and 5) "S"&amp;"B", respectively. A layer list (layerList) is created
 and returned.</p> 
<p>4) Data are then averaged (mean) by date.</p>
<p>5) Date features are added. Columns for year, day of year (doy), decimal
 year (dyear), and month are added based on date. Note that the doy is based on 
 a 366 day calendar regardless of leap year.</p>
<p>6) Reports on the number of records (0), parameters (1), layers (2) and
 stations (3) can be controlled with the reports option.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># run analysis relying on default specifications, examine analySpec for</span></span></span>
<span class="r-in"><span><span class="co"># default options</span></span></span>
<span class="r-in"><span><span class="va">dfr</span> <span class="op">&lt;-</span> <span class="fu">analysisOrganizeData</span><span class="op">(</span><span class="va">dataCensored</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ### Record Count</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> `Beginning Number of Records:  13062`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> `Number of Records After Processing:  13062`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ### Parameters</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> *Table: List of Parameters.*</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Dep. Var.  Parameter Name                Units  Log Tran.  GAM Dep. Var.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ---------  ----------------------------  -----  ---------  -------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> secchi     Secchi Depth                  m      FALSE      secchi       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> chla       Chlorophyll a (Corrected)     ug/L   TRUE       lnchla       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> do         Dissolved Oxygen              mg/L   FALSE      do           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tn         Total Nitrogen                mg/L   TRUE       lntn         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tp         Total Phosphorus              mg/L   TRUE       lntp         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> po4        Orthophosphorus               mg/L   TRUE       lnpo4        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tdp        Total Dissolved Phosphorus    mg/L   TRUE       lntdp        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> no23       Nitrite + Nitrate             mg/L   TRUE       lnno23       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> nh4        Ammonium                      mg/L   TRUE       lnnh4        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tdn        Total Dissolved Nitrogen      mg/L   TRUE       lntdn        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> din        Dissolved Inorganic Nitrogen  mg/L   TRUE       lndin        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> salinity   Salinity                      ppt    FALSE      salinity     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tss        Total Suspended Solids        mg/L   TRUE       lntss        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> wtemp      Water Temperature             deg C  FALSE      wtemp        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ### Layers</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> *Table: List of Layers.*</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Layer ID  Layer Name      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> --------  ----------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> S         Surface         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> AP        Above Pycnocline</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> BP        Below Pycnocline</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> B         Bottom          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ### Models</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> *Table: List of Models.*</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Option  Model                                         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ------  ----------------------------------------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      0  Linear Trend with Seasonality                 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      1  Non-linear Trend with Seasonality             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      2  Non-linear trend with Seas+Int                </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      3  Non-linear trend with Seas+Int. &amp; Intervention</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      4  Non-linear trend with Seas+Int. &amp; Hydro Adj   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ## </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ### Stations</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> *Table: List of Stations.*</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Station ID  Latitude  Longitude  CB 92 Seg.  Flow Adj. Gage  Mth. Group</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ----------  --------  ---------  ----------  --------------  ----------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> CB3.3C       38.9960   -76.3597  CB3MH       01578310        MD-Main   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> CB4.1C       38.8259   -76.3994  CB4MH       01578310        MD-Main   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> CB5.4        37.8001   -76.1747  CB5MH_VA    01578310        VA-All    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> TF5.5        37.3126   -77.2328  JMSTF1      02035000        VA-All    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> EE2.1        38.6549   -76.2643  CHOMH1      01491000        MD-Trib   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> EE3.0        38.2809   -76.0103  FSBMH       01578310        MD-Trib   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> TF2.2        38.6907   -77.1111  POTTF_MD    01646500        MD-Potomac</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LE2.2        38.1576   -76.5980  POTMH_MD    01646500        MD-Potomac</span>
<span class="r-in"><span><span class="va">df</span>        <span class="op">&lt;-</span> <span class="va">dfr</span><span class="op">[[</span><span class="st">"df"</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">analySpec</span> <span class="op">&lt;-</span> <span class="va">dfr</span><span class="op">[[</span><span class="st">"analySpec"</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># analyze bottom dissolved oxygen at 2 stations using only data from 1/1/1995-12/31/2015</span></span></span>
<span class="r-in"><span><span class="va">analySpec</span> <span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">analySpec</span><span class="op">$</span><span class="va">parameterFilt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'do'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">analySpec</span><span class="op">$</span><span class="va">layerFilt</span>     <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'B'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">analySpec</span><span class="op">$</span><span class="va">stationFilt</span>   <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'CB3.3C'</span>, <span class="st">'CB5.4'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">analySpec</span><span class="op">$</span><span class="va">dateFilt</span>      <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXct</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1995-01-01"</span>, <span class="st">"2015-12-31"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dfr</span> <span class="op">&lt;-</span> <span class="fu">analysisOrganizeData</span><span class="op">(</span><span class="va">dataCensored</span>, <span class="va">analySpec</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ### Record Count</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> `Beginning Number of Records:  13062`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> `Number of Records After Processing:  608`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ### Parameters</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> *Table: List of Parameters.*</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Dep. Var.  Parameter Name    Units  Log Tran.  GAM Dep. Var.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ---------  ----------------  -----  ---------  -------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> do         Dissolved Oxygen  mg/L   FALSE      do           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ### Layers</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> *Table: List of Layers.*</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Layer ID  Layer Name</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> --------  ----------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> B         Bottom    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ### Models</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> *Table: List of Models.*</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Option  Model                                         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ------  ----------------------------------------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      0  Linear Trend with Seasonality                 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      1  Non-linear Trend with Seasonality             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      2  Non-linear trend with Seas+Int                </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      3  Non-linear trend with Seas+Int. &amp; Intervention</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      4  Non-linear trend with Seas+Int. &amp; Hydro Adj   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ## </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ### Stations</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> *Table: List of Stations.*</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Station ID  Latitude  Longitude  CB 92 Seg.  Flow Adj. Gage  Mth. Group</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ----------  --------  ---------  ----------  --------------  ----------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> CB3.3C       38.9960   -76.3597  CB3MH       01578310        MD-Main   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> CB5.4        37.8001   -76.1747  CB5MH_VA    01578310        VA-All    </span>
<span class="r-in"><span><span class="va">df</span>        <span class="op">&lt;-</span> <span class="va">dfr</span><span class="op">[[</span><span class="st">"df"</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">analySpec</span> <span class="op">&lt;-</span> <span class="va">dfr</span><span class="op">[[</span><span class="st">"analySpec"</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Erik W Leppo.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

